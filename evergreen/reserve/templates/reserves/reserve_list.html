{% extends "base_bootstrap.html" %}

{% block hdr %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Static Example</title>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

  <!-- XDSoft DateTimePicker -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css" integrity="sha256-DOS9W6NR+NFe1fUhEE0PGKY/fubbUCnOfTje2JMDw3Y=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js" integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script>
{% endblock %}


{% block content %}
<h1>Reserve</h1>
<p>
<h2>Your Reservations</h2>
{% if reserve_list %}
<ul>
  {% for reserve in reserve_list %}
    {% if reserve.owner == user %}
    <li>
        {{ reserve.date }} {{ reserve.hour }}:00 @ Table {{reserve.table.category.name}}_{{reserve.table.name}}
        (<a href="{% url 'reserves:reserve_delete' reserve.id %}">Delete</a>)
        </p>
        {% endif %}
    </li>
  {% endfor %}
</ul>
{% else %}
  <p>There are no reserves in the database.</p>
{% endif %}

<form action="{% url 'reserves:all' %}" method="get">
  <input name="d" id="datetimepicker" type="text" autocomplete="off">
  <script>
    $(function () {
      $("#datetimepicker").datetimepicker();
    });
  </script>
  <input type="submit" value="Submit">
</form>
<p>
{% if err_msg %}
{{err_msg}}
{% else %}
<b>Avalible Tables</b>
<p>
<form action="{% url 'reserves:reserve_create' %}" method="get">
<input type="hidden" name="d" value={{tm}} />
{% for tb, id, val in tb_list %}
<p>
{{tb}}: <button name="n" type="submit" value={{id}}>Book {{tb}}</button>
<p>
{% endfor %}
</form>
{% endif %}

</p>
<p>
<a href="{% url 'reserves:reserve_create' %}">Add an Reserve</a> |
{% if user.is_authenticated %}
<a href="{% url 'logout' %}?next={% url 'reserves:all' %}">Logout</a>
{% else %}
<a href="{% url 'login' %}?next={% url 'reserves:all' %}">Login</a>
{% endif %}
</p>
<p>
<a href="{% url 'index' %}">Home</a> |
{% endblock %}
